{
  "version": 3,
  "sources": ["../../../app/routes/index.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/index.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/index.tsx\");\n  import.meta.hot.lastModified = \"1760871977517.0227\";\n}\n// REMIX HMR END\n\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, Link, useLoaderData } from \"@remix-run/react\";\nimport { SpotifyWebApi } from \"@thomasngrlt/spotify-web-api-ts\";\nimport { addSeconds } from \"date-fns\";\nimport { motion } from \"framer-motion\";\nimport { BackgroundCircles } from \"~/components/BackgroundCircles\";\nimport OnboardingModal from \"~/components/OnboardingModal\";\nimport { commitSession, getSession } from \"~/sessions\";\nimport { tokenHasExpired } from \"~/utils/tokenHasExpired\";\nexport async function loader({\n  request\n}) {\n  const session = await getSession(request.headers.get(\"Cookie\"));\n  const redirectUri = new URL(request.url).origin;\n  const spotify = new SpotifyWebApi({\n    redirectUri,\n    clientId: process.env.CLIENT_ID,\n    clientSecret: process.env.CLIENT_SECRET\n  });\n  if (session.has(\"access_token\")) {\n    if (tokenHasExpired(session)) {\n      const refreshToken = session.get(\"refresh_token\");\n      const {\n        access_token,\n        expires_in\n      } = await spotify.getRefreshedAccessToken(refreshToken);\n      session.set(\"access_token\", access_token);\n      const expiryDate = addSeconds(new Date(), expires_in);\n      session.set(\"expiry_date\", expiryDate);\n    }\n    const accessToken = session.get(\"access_token\");\n    spotify.setAccessToken(accessToken);\n    const userProfile = await spotify.users.getMe();\n    session.set(\"user_id\", userProfile.id);\n    return json({\n      userProfile,\n      oAuthUrl: null\n    }, {\n      headers: {\n        \"Set-Cookie\": await commitSession(session)\n      }\n    });\n  }\n  const url = new URL(request.url);\n  const code = url.searchParams.get(\"code\");\n  if (!code) {\n    const oAuthUrl = spotify.getRefreshableAuthorizationUrl({\n      scope: [\"user-follow-read\", \"playlist-modify-public\", \"user-top-read\"]\n    });\n    return json({\n      userProfile: null,\n      oAuthUrl\n    });\n  }\n  const {\n    access_token,\n    expires_in,\n    refresh_token\n  } = await spotify.getRefreshableUserTokens(code);\n  spotify.setAccessToken(access_token);\n  const expiryDate = addSeconds(new Date(), expires_in);\n  const userProfile = await spotify.users.getMe();\n  session.set(\"access_token\", access_token);\n  session.set(\"refresh_token\", refresh_token);\n  session.set(\"expiry_date\", expiryDate.toISOString());\n  session.set(\"user_id\", userProfile.id);\n  throw redirect(\"/\", {\n    headers: {\n      \"Set-Cookie\": await commitSession(session)\n    }\n  });\n}\nexport default function Index() {\n  _s();\n  const {\n    userProfile,\n    oAuthUrl\n  } = useLoaderData();\n  return <div className=\"h-screen overflow-hidden\">\n\t\t\t<div className=\"relative z-10 flex h-full max-h-full\">\n\t\t\t\t<div className=\"flex h-full w-full flex-col items-center justify-center gap-y-4 border-r border-white/20 px-8 text-center drop-shadow-xl sm:max-w-xl sm:items-start sm:text-left md:px-16\">\n\t\t\t\t\t<div className=\"flex w-full flex-col items-center gap-y-4 sm:items-start\">\n\t\t\t\t\t\t<h1 className=\"w-full text-5xl tracking-tighter\">\n\t\t\t\t\t\t\tStay in sync with the music you love\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t<p className=\"w-full\">\n\t\t\t\t\t\t\tinsync creates playlists from your followed artists on Spotify.\n\t\t\t\t\t\t\tConnect your account for personalised music discovery.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{oAuthUrl ? <a href={oAuthUrl} className=\"w-max rounded-full bg-green-500 px-4 py-2 text-sm font-bold uppercase text-neutral-900 transition-colors hover:bg-green-400\">\n\t\t\t\t\t\t\t\tConnect to Spotify\n\t\t\t\t\t\t\t</a> : <div className=\"flex h-16 w-full gap-x-2\">\n\t\t\t\t\t\t\t\t<Link to=\"./basic\" className=\"flex h-full w-full items-center justify-center rounded-2xl border border-neutral-700 bg-neutral-900 transition duration-300 hover:border-neutral-500\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-xl\">Basic</p>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t<Link to=\"./studio\" className=\"group relative h-full w-full rounded-2xl bg-gradient-to-br from-white/10 via-white/75 to-white/10\">\n\t\t\t\t\t\t\t\t\t<div className=\"absolute inset-0.5 flex items-center  justify-center overflow-hidden rounded-[14px] bg-gradient-to-br from-black via-[#222] to-black shadow-tile ring-white/20 transition-all duration-300 hover:ring-[2px]\">\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-2xl font-semibold tracking-tighter\">\n\t\t\t\t\t\t\t\t\t\t\tStudio\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<div className=\"absolute inset-0 h-full w-full bg-gradient-to-t from-green-500 to-transparent opacity-10 transition-all duration-300 group-hover:opacity-20\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t<OnboardingModal />{\" \"}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{userProfile ? <div className=\"flex w-full flex-col gap-y-2\">\n\t\t\t\t\t\t\t<hr className=\"border-neutral-600\" />\n\t\t\t\t\t\t\t<div className=\"flex flex-col items-center gap-x-2 sm:flex-row sm:justify-between\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-x-2\">\n\t\t\t\t\t\t\t\t\t{/* <ProfileImage userProfile={userProfile} /> */}\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\t\t\t\t\tLogged in as {userProfile.display_name}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Form method=\"post\" action=\"/logout\">\n\t\t\t\t\t\t\t\t\t<button type=\"submit\" value=\"logout\" className=\"text-sm underline\">\n\t\t\t\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div> : null}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"relative hidden h-full w-full items-center overflow-hidden sm:flex sm:justify-end\">\n\t\t\t\t\t<BackgroundCircles />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<motion.div initial={{\n      opacity: 0\n    }} animate={{\n      opacity: 1\n    }} transition={{\n      delay: 0.5,\n      duration: 2\n    }} className=\"relative z-0 flex blur-md sm:hidden\">\n\t\t\t\t<BackgroundCircles />\n\t\t\t</motion.div>\n\t\t</div>;\n}\n_s(Index, \"HEhtDiZ8fg/EYjvOAKBEQHCuZX8=\", false, function () {\n  return [useLoaderData];\n});\n_c = Index;\nexport function ErrorBoundary() {\n  return <div className=\"flex h-full max-h-full\">\n\t\t\t<div className=\"z-10 flex h-full w-full flex-col items-center justify-center gap-y-4 border-r border-white/20 px-8 text-center drop-shadow-xl sm:max-w-xl sm:items-start sm:text-left md:px-16\">\n\t\t\t\t<div className=\"w-full\">\n\t\t\t\t\t<h1 className=\"mb-2 text-3xl tracking-tighter sm:text-5xl\">\n\t\t\t\t\t\tWhoops!\n\t\t\t\t\t</h1>\n\t\t\t\t\t<p className=\"mb-2\">insync ran into an error.</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tClick the button below to be taken back to the homepage, and we'll\n\t\t\t\t\t\ttry again.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<Form method=\"post\" action=\"/logout\">\n\t\t\t\t\t<button type=\"submit\" className=\"w-max rounded-full bg-green-500 px-4 py-2 text-sm font-bold uppercase text-neutral-900 transition-colors hover:bg-green-400\">\n\t\t\t\t\t\tHome\n\t\t\t\t\t</button>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t\t<motion.div initial={{\n      opacity: 0\n    }} animate={{\n      opacity: 1\n    }} transition={{\n      delay: 0.5,\n      duration: 2\n    }} className=\"relative z-0 flex blur-md sm:hidden\">\n\t\t\t\t<BackgroundCircles />\n\t\t\t</motion.div>\n\t\t</div>;\n}\n\n// function ProfileImage({ userProfile }: { userProfile: PrivateUser }) {\n// \tif (userProfile.images && userProfile.images.length === 0) {\n// \t\treturn <ProfileCircle className=\"h-4 w-4\" />;\n// \t}\n\n// \treturn (\n// \t\t<img\n// \t\t\tsrc={userProfile.images![0].url}\n// \t\t\talt=\"\"\n// \t\t\tclassName=\"h-4 w-4 rounded-full border border-white\"\n// \t\t\theight={16}\n// \t\t\twidth={16}\n// \t\t/>\n// \t);\n// }\n_c2 = ErrorBoundary;\nvar _c, _c2;\n$RefreshReg$(_c, \"Index\");\n$RefreshReg$(_c2, \"ErrorBoundary\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
