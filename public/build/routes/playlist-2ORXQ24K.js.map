{
  "version": 3,
  "sources": ["../../../app/routes/playlist.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/playlist.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/playlist.tsx\");\n  import.meta.hot.lastModified = \"1760871995830.4316\";\n}\n// REMIX HMR END\n\nimport { json, redirect } from \"@remix-run/node\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport { SpotifyWebApi } from \"@thomasngrlt/spotify-web-api-ts\";\nimport { addSeconds } from \"date-fns\";\nimport { motion } from \"framer-motion\";\nimport React from \"react\";\nimport { BackgroundCircles } from \"~/components/BackgroundCircles\";\nimport { getSession } from \"~/sessions\";\nimport { tokenHasExpired } from \"~/utils/tokenHasExpired\";\nexport async function loader({\n  request\n}) {\n  const session = await getSession(request.headers.get(\"Cookie\"));\n  const redirectUri = new URL(request.url).origin;\n  const url = new URL(request.url);\n  const playlistId = url.searchParams.get(\"id\");\n  if (!session.has(\"access_token\") || !playlistId) {\n    throw redirect(\"/\");\n  }\n  const spotify = new SpotifyWebApi({\n    redirectUri,\n    clientId: process.env.CLIENT_ID,\n    clientSecret: process.env.CLIENT_SECRET\n  });\n  if (tokenHasExpired(session)) {\n    const refreshToken = session.get(\"refresh_token\");\n    const {\n      access_token,\n      expires_in\n    } = await spotify.getRefreshedAccessToken(refreshToken);\n    session.set(\"access_token\", access_token);\n    const expiryDate = addSeconds(new Date(), expires_in);\n    session.set(\"expiry_date\", expiryDate);\n  }\n  const accessToken = session.get(\"access_token\");\n  spotify.setAccessToken(accessToken);\n  try {\n    const playlist = await spotify.playlists.getPlaylist(playlistId);\n    return json({\n      ok: true,\n      playlist\n    });\n  } catch (err) {\n    return redirect(\"/\");\n  }\n}\nexport default function GeneratePage() {\n  _s();\n  const {\n    playlist\n  } = useLoaderData();\n  const artists = playlist.tracks.items.filter(item => item.track.type === \"track\").map(item => item.track.artists[0].name).filter(name => name !== undefined).slice(0, 3).map(name => <span key={name} className=\"text-green-500\">\n\t\t\t\t{name.toString()}\n\t\t\t</span>).reduce((prev, curr) => [prev, \", \", curr]);\n  const {\n    id: playlistId,\n    name: playlistName,\n    owner: {\n      display_name: username\n    },\n    images\n  } = playlist;\n  const playlistUrl = `https://open.spotify.com/playlist/${playlistId}`;\n  const playlistImageUrl = images?.[1]?.url || images?.[0].url || \"/images/cover.png\";\n  return <div className=\"h-screen overflow-hidden\">\n\t\t\t<div className=\"relative z-10 flex h-full w-full items-center justify-center px-4\">\n\t\t\t\t<div className=\"relative z-10 flex max-w-xl flex-col items-center justify-center gap-y-8\">\n\t\t\t\t\t<motion.h1 initial={{\n          opacity: 0,\n          y: -20\n        }} animate={{\n          opacity: 1,\n          y: 0\n        }} className=\"mb-2 text-center text-3xl sm:text-5xl\">\n\t\t\t\t\t\tYour playlist with {artists} + others\n\t\t\t\t\t</motion.h1>\n\t\t\t\t\t<motion.div initial={{\n          opacity: 0,\n          y: 20\n        }} animate={{\n          opacity: 1,\n          y: 0\n        }} transition={{\n          delay: 0.2\n        }} className=\"flex flex-col items-center space-y-4 rounded-lg border border-neutral-700 bg-neutral-800 px-8 py-8 shadow-md\">\n\t\t\t\t\t\t<img src={playlistImageUrl} alt={`Playlist for ${username}`} className=\"h-52 w-52 bg-neutral-400 shadow-md\" height={208} width={208} />\n\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t<h2 className=\"text-2xl\">{playlistName || \"insync mixtape\"}</h2>\n\t\t\t\t\t\t\t<p className=\"text-sm text-neutral-300\">\n\t\t\t\t\t\t\t\tFor {username || \"you\"}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a href={playlistUrl} target=\"_blank\" rel=\"noreferrer\" className=\"w-max rounded-full bg-green-500 px-4 py-2 text-sm font-bold uppercase text-neutral-900 transition-colors hover:bg-green-400\">\n\t\t\t\t\t\t\tOpen\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</motion.div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<motion.div initial={{\n      opacity: 0\n    }} animate={{\n      opacity: 1\n    }} transition={{\n      delay: 0.5,\n      duration: 2\n    }} className=\"relative top-2/3 z-0 sm:top-1/2\">\n\t\t\t\t<BackgroundCircles />\n\t\t\t</motion.div>\n\t\t</div>;\n}\n_s(GeneratePage, \"g/1ectL//e60mkltRe3HCZ76okc=\", false, function () {\n  return [useLoaderData];\n});\n_c = GeneratePage;\nvar _c;\n$RefreshReg$(_c, \"GeneratePage\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
